trigger:
- master

pool:
  vmImage: 'windows-latest'

stages:
- stage: BuildRun
  jobs:
  - job: PullLatestImageJob
    steps:
    - bash: docker pull akbarchandani/selenium-docker-linux
  - job: StartGridJob
    dependsOn: PullLatestImageJob
    steps:
    - bash: docker-compose up -d hub chrome firefox
  - job: RunTestJob
    dependsOn: StartGridJob
    steps:
    - bash: docker-compose up search-module book-flight-module
  - job: PostJob
    dependsOn: RunTestJob
    steps:
    - bash: docker-compose down